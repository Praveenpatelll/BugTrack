
# Supabase Setup Guide

To run this application with Supabase, follow these steps:

## 1. Create a Project
Go to [database.new](https://database.new) and create a new Supabase project.

## 2. Run SQL Query
Go to the **SQL Editor** in your Supabase dashboard and run the following script to create the necessary tables and seed data:

```sql
-- 1. Create Users Table (Public profile table for this app)
create table public.users (
  id bigint generated by default as identity primary key,
  name text not null,
  email text,
  avatar text
);

-- 2. Create Projects Table
create table public.projects (
  id bigint generated by default as identity primary key,
  name text not null,
  key text unique not null,
  description text,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- 3. Create Bugs Table
create table public.bugs (
  id bigint generated by default as identity primary key,
  title text not null,
  description text,
  status text default 'Open',
  priority text default 'Medium',
  severity text default 'Minor',
  assignee_id bigint references public.users(id),
  reporter_id bigint references public.users(id),
  project_id bigint references public.projects(id),
  module text,
  environment text,
  steps_to_reproduce text,
  expected_result text,
  actual_result text,
  screenshot text,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null
);

-- 4. Seed Data (Users)
insert into public.users (name, email, avatar) values 
('Alice Admin', 'alice@bug.com', 'https://ui-avatars.com/api/?name=Alice+Admin&background=random'),
('Bob Dev', 'bob@bug.com', 'https://ui-avatars.com/api/?name=Bob+Dev&background=random'),
('Charlie QA', 'charlie@bug.com', 'https://ui-avatars.com/api/?name=Charlie+QA&background=random');

-- 5. Seed Data (Projects)
insert into public.projects (name, key, description) values 
('Website Redesign', 'WEB', 'Main website overhaul project'),
('Mobile App', 'MOB', 'iOS and Android application');

-- 6. Seed Data (Bugs)
insert into public.bugs (title, description, status, priority, severity, assignee_id, reporter_id, project_id, environment, module) values
('Homepage 404', 'The homepage returns a 404 error occasionally.', 'Open', 'High', 'Critical', 2, 1, 1, 'Production', 'Frontend'),
('Button Misalignment', 'Submit button is not aligned in the form.', 'In Progress', 'Low', 'Minor', 2, 3, 1, 'Staging', 'UI'),
('Crash on Login', 'App crashes when clicking login.', 'Open', 'Critical', 'Critical', 1, 3, 2, 'iOS 17', 'Auth');
```

## 3. Setup Storage
1. Go to **Storage** in the sidebar.
2. Create a new public bucket named `screenshots`.
3. Create a new public bucket named `avatars`.
4. Set both buckets to "Public" so images can be viewed.

## 4. Environment Variables
Create a file named `.env` in the root of your frontend folder (`bug-tracker/.env`) and add your credentials:

```bash
VITE_SUPABASE_URL=https://your-project-url.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key
```

You can find these in **Project Settings > API**.
